"0","# sim <- unique(doe$sim)"
"0","# time <- unique(ecosystem$time)"
"0","# resilience <- sapply(sim, function(s){"
"0","#   data_s <- ecosystem[which(ecosystem$sim %in% c(s, paste0(s, '.0'))),]"
"0","#   data_s <- sapply(time, function(t){"
"0","#     data_t <- subset(data_s, time == t)"
"0","#     T0 <- which(data_t$sim == paste0(s, '.0'))"
"0","#     data_t[-c(1:2)] <- apply(data_t[-c(1:2)], 2, function(x) x/x[T0])"
"0","#     return(data_t[-T0,])"
"0","#   }, simplify = F)"
"0","#   data_s <- do.call('rbind', data_s)"
"0","# }, simplify = F) ; rm(sim, time)"
"0","# resilience <- do.call('rbind', resilience)"
"0","# save(resilience, file = file.path(path, 'resilience.Rdata'))"
"0","load(file.path(path, 'resilience.Rdata'))"
