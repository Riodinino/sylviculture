"0","library(dplyr)"
"0","# mature <- loadStack('~/Documents/ECOFOG/Results/disturbance/maturity/models/')"
"0","# save(mature, file = '~/Documents/ECOFOG/Results/disturbance/maturity/mature.Rdata')"
"0","# load('~/Documents/ECOFOG/Results/disturbance/maturity/mature.Rdata')"
"0","# data <- data.frame(species = c('Total'))"
"0","# for(layer in mature@layers){"
"0","#   cat(layer@name, '\n')"
"0","#   data_l <- layer@final_pattern@data"
"0","#   data_l$species <- row.names(layer@sp_par)[data_l$sp_lab]"
"0","#   data_l <- data_l %>%"
"0","#     left_join(harvest, by = 'species') %>%"
"0","#     filter(!is.na(dbh_min)) %>%"
"0","#     filter(dbh >= dbh_min) %>%"
"0","#     filter(dbh <= dbh_max) %>%"
"0","#     mutate(volume = -0.0358 + 8.7634*dbh^2) %>%"
"0","#     group_by(species) %>%"
"0","#     summarise_each(funs(sum)) %>%"
"0","#     select(species, volume)"
"0","#   names(data_l)[2] <- layer@name"
"0","#   data <- full_join(data, data_l, by = 'species')"
"0","# }"
"0","# row.names(data) <- data$species"
"0","# data <- data[-1]"
"0","# data[is.na(data)] <- 0"
"0","# data['Total',] <- colSums(data)"
"0","# data <- t(data)"
"0","# save(data, file = '~/Documents/ECOFOG/Results/disturbance/maturity/matureSylv.Rdata')"
"0","load('~/Documents/ECOFOG/Results/disturbance/maturity/matureSylv.Rdata')"
"0","data <- data.frame(data)"
"0","data <- data[-which(data$Total == 0),]"
"0","names(data) <- gsub('_', '\n', names(data))"
"0","data <- round(data/16, 3)"
"0","DT::datatable(data, "
"0","              options = list(pageLength = 47, order = c(1, 'desc')),"
"0","              caption = 'Harvestable volume (m3/ha)')"
